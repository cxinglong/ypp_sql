webpackJsonp([24],{190:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n.n(o),s=n(2);e.default={name:"work_flow",props:["msg"],data:function(){return{stepData:{title:"比心数据库集中查询平台",describe:"欢迎你！ "+sessionStorage.getItem("user")},step:{remark:"",computer_room:"",connection_name:""},stepList1:[{title:"提交",describe:"提交查询申请"},{title:"审核",describe:"等待审核结果"},{title:"查询",describe:"审核完毕，进入查询页面"}],stepRules:{computer_room:[{required:!0,message:"环境地址不得为空",trigger:"change"}],connection_name:[{required:!0,message:"业务信息不得为空",trigger:"change"}],basename:[{required:!0,message:"数据库名不得为空",trigger:"change"}]},item:{},datalist:{connection_name_list:[],basenamelist:[],sqllist:[],computer_roomlist:s.a.computer_room}}},methods:{Connection_Name:function(t){this.datalist.connection_name_list=[],this.datalist.basenamelist=[],this.step.connection_name="",this.step.basename="",t&&this.ScreenConnection(t)},ScreenConnection:function(t){var e=this;this.datalist.connection_name_list=this.item.filter(function(n){if(n.computer_room===t)return e.$set(e.step,"connection_name",n.connection_name),n})},handleSubmit:function(){var t=this;this.$refs.step.validate(function(e){e&&r.a.put(s.a.url+"/query_worklf",{mode:"put",connection_name:t.step.connection_name,computer_room:t.step.computer_room}).then(function(){t.$router.push({name:"queryready"})})})}},mounted:function(){var t=this;r.a.put(s.a.url+"/workorder/connection",{permissions_type:"query"}).then(function(e){t.item=e.data.connection,t.datalist.computer_roomlist=e.data.custom,t.$set(t.step,"computer_room",t.datalist.computer_roomlist[2]),t.ScreenConnection(t.datalist.computer_roomlist[2])}).catch(function(t){s.a.err_notice(t)}),r.a.put(s.a.url+"/query_worklf",{mode:"status"}).then(function(e){1===e.data?t.$router.push({name:"querypage"}):2===e.data&&t.$router.push({name:"queryready"})})}}},191:function(t,e,n){e=t.exports=n(75)(!0),e.push([t.i,".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}","",{version:3,sources:["/Users/vincent/Desktop/ypp_sql/webpage/src/components/Search/workFlow.vue"],names:[],mappings:"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB",file:"workFlow.vue",sourcesContent:["\n.step-header-con {\n  text-align: center;\n}\n.step-header-con h3 {\n  margin: 10px 0;\n}\n.step-header-con h5 {\n  margin: 0 0 5px;\n}\n.step-content {\n  padding: 5px 20px 26px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #dbdddf;\n}\n.step-form {\n  padding-bottom: 10px;\n  border-bottom: 1px solid #dbdddf;\n  margin-bottom: 20px;\n}\n"],sourceRoot:""}])},210:function(t,e,n){var o=n(191);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(76)("dfec1238",o,!0,{})},212:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("Card",[n("div",{staticClass:"step-header-con"},[n("h3",[t._v(t._s(t.stepData.title))]),t._v(" "),n("h5",[t._v(t._s(t.stepData.describe))])]),t._v(" "),n("p",{staticClass:"step-content"}),t._v(" "),n("Row",[n("i-col",{attrs:{span:"8"}},[n("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n            使用说明:\n            "),n("span",{attrs:{slot:"desc"},slot:"desc"},[t._v("\n            1.目前仅开放 隔离只读 环境的select权限，与生产隔离且关键字段已脱敏。\n            "),n("br"),t._v("\n            2.所有提交的查询语句均会进行后台审计记录。\n            "),n("br"),t._v("\n            3.仅支持select语句,不可使用非查询语句。\n            "),n("br"),t._v("\n            4.已限制最大limit 100，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准。\n          ")])])],1),t._v(" "),n("i-col",{attrs:{span:"6"}},[n("Form",{ref:"step",attrs:{model:t.step,rules:t.stepRules,"label-width":150}},[n("FormItem",{attrs:{label:"环境:",prop:"computer_room"}},[n("Select",{on:{"on-change":t.Connection_Name},model:{value:t.step.computer_room,callback:function(e){t.$set(t.step,"computer_room",e)},expression:"step.computer_room"}},t._l(t.datalist.computer_roomlist,function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),t._v(" "),n("Form-item",{attrs:{label:"业务信息:",prop:"connection_name"}},[n("Select",{attrs:{filterable:""},model:{value:t.step.connection_name,callback:function(e){t.$set(t.step,"connection_name",e)},expression:"step.connection_name"}},t._l(t.datalist.connection_name_list,function(e){return n("Option",{key:e.connection_name,attrs:{value:e.connection_name}},[t._v(t._s(e.connection_name))])}))],1),t._v(" "),n("FormItem",{attrs:{label:""}},[n("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("进入查询页")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}},77:function(t,e,n){function o(t){n(210)}var r=n(1)(n(190),n(212),o,null,null);t.exports=r.exports}});
//# sourceMappingURL=24.8820460054520c9e0dec.js.map