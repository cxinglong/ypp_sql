webpackJsonp([12],{172:function(e,t,o){t=e.exports=o(76)(!0),t.push([e.i,".tabletop{margin-top:1%}.model_input{width:100%}.model_input,.model_p{margin-top:2%;font-size:14px}.div,.div_center{margin-top:2%;margin-left:10%}.div_center{width:50%}.div_display{display:none}.ivu-table .demo-table-info-row td{background-color:#2db7f5;color:#000}.ivu-table .demo-table-error-row td{background-color:#f90;color:#000}.ivu-table .demo-table-row td{background-color:#bbbec4;color:#000}.ivu-table .demo-table-info-cell-name,.ivu-table td.demo-table-info-column{background-color:#2db7f5;color:#fff}.ivu-table .demo-table-info-cell-age{background-color:#f60;color:#fff}.ivu-table .demo-table-info-cell-address{background-color:#187;color:#fff}.model_title{font-size:13px;color:#1c2438}.model_context{font-size:15px;color:#80848f}","",{version:3,sources:["/Users/vincent/Desktop/ypp_sql/webpage/src/assets/tablesmargintop.css"],names:[],mappings:"AAAA,UACE,aAAc,CACf,AAED,aACE,UAAY,CAGb,AAED,sBAJE,cAAe,AACf,cAAe,CAMhB,AAMD,iBAHE,cAAe,AACf,eAAiB,CAMlB,AAJD,YACE,SAAW,CAGZ,AAED,aACE,YAAc,CACf,AAED,mCACE,yBAA0B,AAC1B,UAAY,CACb,AACD,oCACE,sBAA0B,AAC1B,UAAY,CACb,AAED,8BACE,yBAA0B,AAC1B,UAAY,CACb,AAKD,2EACE,yBAA0B,AAC1B,UAAY,CACb,AACD,qCACE,sBAA0B,AAC1B,UAAY,CACb,AACD,yCACE,sBAAuB,AACvB,UAAY,CACb,AAED,aACE,eAAgB,AAChB,aAAe,CAChB,AAED,eACE,eAAgB,AAChB,aAAe,CAChB",file:"tablesmargintop.css",sourcesContent:[".tabletop{\n  margin-top: 1%\n}\n\n.model_input{\n  width: 100%;\n  margin-top: 2%;\n  font-size: 14px\n}\n\n.model_p{\n  font-size: 14px;\n  margin-top: 2%;\n}\n\n.div{\n  margin-top: 2%;\n  margin-left: 10%;\n}\n.div_center{\n  width: 50%;\n  margin-left: 10%;\n  margin-top: 2%;\n}\n\n.div_display{\n  display: none;\n}\n\n.ivu-table .demo-table-info-row td{\n  background-color: #2db7f5;\n  color: #000;\n}\n.ivu-table .demo-table-error-row td{\n  background-color: #ff9900;\n  color: #000;\n}\n\n.ivu-table .demo-table-row td{\n  background-color: #bbbec4;\n  color: #000;\n}\n.ivu-table td.demo-table-info-column{\n  background-color: #2db7f5;\n  color: #fff;\n}\n.ivu-table .demo-table-info-cell-name {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.ivu-table .demo-table-info-cell-age {\n  background-color: #ff6600;\n  color: #fff;\n}\n.ivu-table .demo-table-info-cell-address {\n  background-color: #187;\n  color: #fff;\n}\n\n.model_title {\n  font-size: 13px;\n  color: #1c2438;\n}\n\n.model_context {\n  font-size: 15px;\n  color: #80848f;\n}\n"],sourceRoot:""}])},173:function(e,t,o){var n=o(172);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(77)("1ef3297e",n,!0,{})},306:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(4),i=n(r);o(173);var a=o(2),l=n(a),s={ddl:"0",ddlcon:[],dml:"0",dmlcon:[],query:"0",querycon:[],dic:"0",diccon:[],dicedit:"0",dicexport:"0",user:"0",base:"0",person:[]};t.default={name:"auth-group",data:function(){var e=this;return{isAdd:!0,isReadOnly:!1,pagenumber:1,data6:[],columns:[{title:"ID",key:"id",width:85,sortable:!0},{title:"权限组",key:"username",sortable:!0},{title:"操作",key:"action",align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editAuthGroup(o.row)}}},"查看与编辑"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteAuthGroup(o.row)}}},"删除")])}}],permission:s,indeterminate:{ddl:!0,dml:!0,query:!0,dic:!0,person:!0},checkAll:{ddl:!1,dml:!1,query:!1,dic:!1,person:!1},connectionList:{connection:[],dic:[],person:[]},addAuthGroupForm:{groupname:""},addAuthGroupModal:!1}},methods:{editAuthGroup:function(e){this.addAuthGroupModal=!0,this.isAdd=!1,this.isReadOnly=!0,this.id=e.id,this.addAuthGroupForm.groupname=e.username,this.permission=e.permissions},createModel:function(){this.addAuthGroupModal=!0,this.isReadOnly=!1,this.isAdd=!0,this.permission=s},createAuthGroup:function(){var e=this,t=!0,o=!1,n=void 0;try{for(var r,a=this.data6[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;if(this.addAuthGroupForm.groupname===s.username)return l.default.err_notice("不可创建相同名的权限组！")}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}i.default.post(l.default.url+"/authgroup/",{groupname:this.addAuthGroupForm.groupname,permission:JSON.stringify(this.permission)}).then(function(t){l.default.notice(t.data),e.$refs.total.currentPage=1,e.refreshgroup()}).catch(function(e){l.default.err_notice(e)}),this.addAuthGroupModal=!1},saveAddGroup:function(){var e=this;i.default.put(l.default.url+"/authgroup/update",{groupname:this.addAuthGroupForm.groupname,permission:JSON.stringify(this.permission)}).then(function(t){l.default.notice(t.data),e.$refs.total.currentPage=1,e.refreshgroup()}).catch(function(e){l.default.err_notice(e)}),this.addAuthGroupModal=!1},refreshgroup:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i.default.get(l.default.url+"/authgroup/all?page="+t).then(function(t){e.data6=t.data.data,e.pagenumber=parseInt(t.data.page)}).catch(function(t){l.default.ajanxerrorcode(e,t)})},splicpage:function(e){this.refreshgroup(e)},ddlCheckAll:function(e,t,o){this.indeterminate[t]?this.checkAll[t]=!1:this.checkAll[t]=!this.checkAll[t],this.indeterminate[t]=!1,this.checkAll[t]?this.permission[e]="dic"===o?this.connectionList[o].map(function(e){return e.Name}):"person"===o?this.connectionList[o].map(function(e){return e.username}):this.connectionList[o].map(function(e){return e.connection_name}):this.permission[e]=[]},deleteAuthGroup:function(e){var t=this;i.default.delete(l.default.url+"/authgroup/"+e.username).then(function(e){l.default.notice(e.data),t.refreshgroup()}).catch(function(e){return l.default.err_notice(e)})}},mounted:function(){var e=this;i.default.put(l.default.url+"/workorder/connection",{permissions_type:"user"}).then(function(t){e.connectionList.connection=t.data.connection,e.connectionList.dic=t.data.dic,e.connectionList.person=t.data.person}).catch(function(e){l.default.err_notice(e)}),this.refreshgroup()}}},651:function(e,t,o){t=e.exports=o(76)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"AuthGroup.vue",sourceRoot:""}])},682:function(e,t,o){var n=o(651);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(77)("507948cd",n,!0,{})},725:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Row",[o("Card",[o("div",[o("Button",{attrs:{type:"primary",icon:"person-stalker"},on:{click:e.createModel}},[e._v("添加权限组")]),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("Table",{attrs:{border:"",columns:e.columns,data:e.data6,stripe:"",height:"550"}})],1),e._v(" "),o("br"),e._v(" "),o("Page",{ref:"total",attrs:{total:e.pagenumber,"show-elevator":"","page-size":10},on:{"on-change":e.splicpage}})],1)],1),e._v(" "),o("Modal",{attrs:{width:800},model:{value:e.addAuthGroupModal,callback:function(t){e.addAuthGroupModal=t},expression:"addAuthGroupModal"}},[o("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[e._v("权限组设置")]),e._v(" "),o("Form",{attrs:{model:e.addAuthGroupForm,"label-width":120,"label-position":"right"}},[o("FormItem",{attrs:{label:"* 权限组名"}},[o("Input",{attrs:{readonly:e.isReadOnly},model:{value:e.addAuthGroupForm.groupname,callback:function(t){e.$set(e.addAuthGroupForm,"groupname",t)},expression:"addAuthGroupForm.groupname"}})],1),e._v(" "),[o("FormItem",{attrs:{label:"DDL及索引权限:"}},[o("RadioGroup",{model:{value:e.permission.ddl,callback:function(t){e.$set(e.permission,"ddl",t)},expression:"permission.ddl"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),"1"===e.permission.ddl?[o("FormItem",{attrs:{label:"业务项目:"}},[o("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[o("Checkbox",{attrs:{indeterminate:e.indeterminate.ddl,value:e.checkAll.ddl},nativeOn:{click:function(t){t.preventDefault(),e.ddlCheckAll("ddlcon","ddl","connection")}}},[e._v("全选\n              ")])],1),e._v(" "),o("CheckboxGroup",{model:{value:e.permission.ddlcon,callback:function(t){e.$set(e.permission,"ddlcon",t)},expression:"permission.ddlcon"}},e._l(e.connectionList.connection,function(t){return o("Checkbox",{key:t.connection_name,attrs:{label:t.connection_name}},[e._v("\n                "+e._s(t.connection_name)+"\n              ")])}))],1)]:e._e(),e._v(" "),o("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),o("br"),e._v(" "),o("FormItem",{attrs:{label:"DML权限:"}},[o("RadioGroup",{model:{value:e.permission.dml,callback:function(t){e.$set(e.permission,"dml",t)},expression:"permission.dml"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),"1"===e.permission.dml?[o("FormItem",{attrs:{label:"业务项目:"}},[o("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[o("Checkbox",{attrs:{indeterminate:e.indeterminate.dml,value:e.checkAll.dml},nativeOn:{click:function(t){t.preventDefault(),e.ddlCheckAll("dmlcon","dml","connection")}}},[e._v("全选\n              ")])],1),e._v(" "),o("CheckboxGroup",{model:{value:e.permission.dmlcon,callback:function(t){e.$set(e.permission,"dmlcon",t)},expression:"permission.dmlcon"}},e._l(e.connectionList.connection,function(t){return o("Checkbox",{key:t.connection_name,attrs:{label:t.connection_name}},[e._v("\n                "+e._s(t.connection_name)+"\n              ")])}))],1)]:e._e(),e._v(" "),o("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),o("br"),e._v(" "),o("FormItem",{attrs:{label:"数据查询权限:"}},[o("RadioGroup",{model:{value:e.permission.query,callback:function(t){e.$set(e.permission,"query",t)},expression:"permission.query"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),"1"===e.permission.query?[o("FormItem",{attrs:{label:"业务项目:"}},[o("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[o("Checkbox",{attrs:{indeterminate:e.indeterminate.query,value:e.checkAll.query},nativeOn:{click:function(t){t.preventDefault(),e.ddlCheckAll("querycon","query","connection")}}},[e._v("全选")])],1),e._v(" "),o("CheckboxGroup",{model:{value:e.permission.querycon,callback:function(t){e.$set(e.permission,"querycon",t)},expression:"permission.querycon"}},e._l(e.connectionList.connection,function(t){return o("Checkbox",{key:t.connection_name,attrs:{label:t.connection_name}},[e._v(e._s(t.connection_name))])}))],1)]:e._e(),e._v(" "),o("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),o("br"),e._v(" "),o("FormItem",{attrs:{label:"选择审批人:"}},[o("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[o("Checkbox",{attrs:{indeterminate:e.indeterminate.person,value:e.checkAll.person},nativeOn:{click:function(t){t.preventDefault(),e.ddlCheckAll("person","person","person")}}},[e._v("全选\n            ")])],1),e._v(" "),o("CheckboxGroup",{model:{value:e.permission.person,callback:function(t){e.$set(e.permission,"person",t)},expression:"permission.person"}},e._l(e.connectionList.person,function(t){return o("Checkbox",{key:t.username,attrs:{label:t.username}},[e._v(e._s(t.username)+"\n            ")])}))],1),e._v(" "),o("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),o("br"),e._v(" "),o("FormItem",{attrs:{label:"数据字典权限:"}},[o("RadioGroup",{model:{value:e.permission.dic,callback:function(t){e.$set(e.permission,"dic",t)},expression:"permission.dic"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),"1"===e.permission.dic?[o("FormItem",{attrs:{label:"数据字典修改权限:"}},[o("RadioGroup",{model:{value:e.permission.dicedit,callback:function(t){e.$set(e.permission,"dicedit",t)},expression:"permission.dicedit"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),o("FormItem",{attrs:{label:"数据字典导出权限:"}},[o("RadioGroup",{model:{value:e.permission.dicexport,callback:function(t){e.$set(e.permission,"dicexport",t)},expression:"permission.dicexport"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),o("FormItem",{attrs:{label:"业务项目:"}},[o("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[o("Checkbox",{attrs:{indeterminate:e.indeterminate.dic,value:e.checkAll.dic},nativeOn:{click:function(t){t.preventDefault(),e.ddlCheckAll("diccon","dic","dic")}}},[e._v("全选\n              ")])],1),e._v(" "),o("CheckboxGroup",{model:{value:e.permission.diccon,callback:function(t){e.$set(e.permission,"diccon",t)},expression:"permission.diccon"}},e._l(e.connectionList.dic,function(t){return o("Checkbox",{key:t.Name,attrs:{label:t.Name}},[e._v(e._s(t.Name))])}))],1)]:e._e()],e._v(" "),[o("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),o("br"),e._v(" "),o("FormItem",{attrs:{label:"用户管理权限:"}},[o("RadioGroup",{model:{value:e.permission.user,callback:function(t){e.$set(e.permission,"user",t)},expression:"permission.user"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),o("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),o("br"),e._v(" "),o("FormItem",{attrs:{label:"数据库管理权限:"}},[o("RadioGroup",{model:{value:e.permission.base,callback:function(t){e.$set(e.permission,"base",t)},expression:"permission.base"}},[o("Radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),o("Radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)]],2),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.addAuthGroupModal=!1}}},[e._v("取消")]),e._v(" "),e.isAdd?o("Button",{attrs:{type:"primary"},on:{click:e.createAuthGroup}},[e._v("创建")]):o("Button",{attrs:{type:"primary"},on:{click:e.saveAddGroup}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]}},89:function(e,t,o){function n(e){o(682)}var r=o(1)(o(306),o(725),n,"data-v-dfa0ed62",null);e.exports=r.exports}});
//# sourceMappingURL=12.0c1fb61a1c1cc1c74ff7.js.map